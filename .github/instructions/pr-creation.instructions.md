# Pull Request å»ºç«‹æŒ‡ä»¤

## ğŸ¯ ç›®æ¨™
è‡ªå‹•ç”¢ç”Ÿå°ˆæ¥­ã€å®Œæ•´ã€æ˜“æ–¼å¯©æŸ¥çš„ Pull Requestï¼ŒåŠ é€Ÿç¨‹å¼ç¢¼å¯©æŸ¥æµç¨‹ã€‚

## ğŸ“‹ PR æ¨™æº–æ ¼å¼

### 1. PR æ¨™é¡Œè¦ç¯„
```
[é¡å‹] ç°¡æ½”æè¿° (#Issueç·¨è™Ÿ)

é¡å‹é¸é …ï¼š
- feat: æ–°åŠŸèƒ½
- fix: éŒ¯èª¤ä¿®å¾©
- docs: æ–‡ä»¶æ›´æ–°
- style: ç¨‹å¼ç¢¼é¢¨æ ¼èª¿æ•´ï¼ˆä¸å½±éŸ¿åŠŸèƒ½ï¼‰
- refactor: é‡æ§‹ï¼ˆä¸æ–°å¢åŠŸèƒ½æˆ–ä¿®å¾©éŒ¯èª¤ï¼‰
- perf: æ•ˆèƒ½å„ªåŒ–
- test: æ¸¬è©¦ç›¸é—œ
- chore: å»ºç½®æµç¨‹æˆ–è¼”åŠ©å·¥å…·è®Šæ›´
```

ç¯„ä¾‹ï¼š
- `feat: æ–°å¢è³¼ç‰©è»Šçµå¸³åŠŸèƒ½ (#123)`
- `fix: ä¿®å¾©ä½¿ç”¨è€…ç™»å…¥æ™‚çš„è¨˜æ†¶é«”æ´©æ¼å•é¡Œ (#456)`
- `refactor: é‡æ§‹è¨‚å–®è™•ç†é‚è¼¯ä»¥æå‡å¯ç¶­è­·æ€§ (#789)`

### 2. PR æè¿°æ¨¡æ¿
```markdown
## ğŸ“ æ¦‚è¿°
[ç”¨ 2-3 å¥è©±æè¿°é€™å€‹ PR çš„ç›®çš„å’Œè§£æ±ºçš„å•é¡Œ]

## ğŸ¯ é—œè¯ Issue
Closes #[Issueç·¨è™Ÿ]

## ğŸ”„ è®Šæ›´é¡å‹
- [ ] ğŸ› éŒ¯èª¤ä¿®å¾© (Bug fix)
- [ ] âœ¨ æ–°åŠŸèƒ½ (New feature)
- [ ] ğŸ’¥ ç ´å£æ€§è®Šæ›´ (Breaking change)
- [ ] ğŸ“ æ–‡ä»¶æ›´æ–° (Documentation update)
- [ ] â™»ï¸ ç¨‹å¼ç¢¼é‡æ§‹ (Code refactoring)
- [ ] âš¡ æ•ˆèƒ½å„ªåŒ– (Performance improvement)

## ğŸ“‹ è®Šæ›´å…§å®¹

### æ–°å¢åŠŸèƒ½
- [åŠŸèƒ½1]ï¼š[ç°¡çŸ­æè¿°]
- [åŠŸèƒ½2]ï¼š[ç°¡çŸ­æè¿°]

### ä¿®å¾©å•é¡Œ
- [å•é¡Œ1]ï¼š[æ ¹æœ¬åŸå› å’Œè§£æ±ºæ–¹æ¡ˆ]
- [å•é¡Œ2]ï¼š[æ ¹æœ¬åŸå› å’Œè§£æ±ºæ–¹æ¡ˆ]

### æŠ€è¡“è®Šæ›´
- [è®Šæ›´1]ï¼š[ç‚ºä»€éº¼éœ€è¦é€™å€‹è®Šæ›´]
- [è®Šæ›´2]ï¼š[å¸¶ä¾†çš„å¥½è™•]

## ğŸ§ª æ¸¬è©¦

### æ¸¬è©¦è¨ˆç•«
- [ ] å–®å…ƒæ¸¬è©¦å·²æ›´æ–°/æ–°å¢
- [ ] æ•´åˆæ¸¬è©¦å·²é€šé
- [ ] æ‰‹å‹•æ¸¬è©¦å·²å®Œæˆ
- [ ] è¿´æ­¸æ¸¬è©¦å·²åŸ·è¡Œ

### æ¸¬è©¦æ­¥é©Ÿ
1. [æ­¥é©Ÿ1]
2. [æ­¥é©Ÿ2]
3. [é æœŸçµæœ]

### æ¸¬è©¦è¦†è“‹ç‡
- è®Šæ›´å‰ï¼šXX%
- è®Šæ›´å¾Œï¼šXX%

## ğŸ“¸ æˆªåœ–/éŒ„å½±
[å¦‚æœæœ‰ UI è®Šæ›´ï¼Œè«‹é™„ä¸Šå‰å¾Œå°æ¯”åœ–]

### è®Šæ›´å‰
![Before](url)

### è®Šæ›´å¾Œ
![After](url)

## ğŸ“Š æ•ˆèƒ½å½±éŸ¿
[å¦‚æœç›¸é—œï¼Œæè¿°æ•ˆèƒ½æ¸¬è©¦çµæœ]

| æŒ‡æ¨™ | è®Šæ›´å‰ | è®Šæ›´å¾Œ | æ”¹å–„ |
|-----|--------|--------|------|
| è¼‰å…¥æ™‚é–“ | XXms | XXms | XX% |
| è¨˜æ†¶é«”ä½¿ç”¨ | XXMB | XXMB | XX% |
| API å›æ‡‰æ™‚é–“ | XXms | XXms | XX% |

## ğŸš€ éƒ¨ç½²æ³¨æ„äº‹é …

### è³‡æ–™åº«è®Šæ›´
- [ ] éœ€è¦åŸ·è¡Œ migration
- [ ] éœ€è¦æ›´æ–° seed data
- [ ] éœ€è¦å‚™ä»½è³‡æ–™

### ç’°å¢ƒè®Šæ•¸
```env
# æ–°å¢çš„ç’°å¢ƒè®Šæ•¸
NEW_VARIABLE=value
```

### ç›¸ä¾æ€§æ›´æ–°
```json
// package.json è®Šæ›´
{
  "dependencies": {
    "new-package": "^1.0.0"
  }
}
```

### ç ´å£æ€§è®Šæ›´
âš ï¸ **æ³¨æ„**ï¼š[æè¿°ä»»ä½•ç ´å£æ€§è®Šæ›´å’Œé·ç§»æ­¥é©Ÿ]

## âœ… å¯©æŸ¥æª¢æŸ¥æ¸…å–®

### ç¨‹å¼ç¢¼å“è³ª
- [ ] ç¨‹å¼ç¢¼ç¬¦åˆå°ˆæ¡ˆé¢¨æ ¼æŒ‡å—
- [ ] è®Šæ•¸å’Œå‡½æ•¸å‘½åæ¸…æ™°
- [ ] æ²’æœ‰ç•™ä¸‹é™¤éŒ¯ç¨‹å¼ç¢¼
- [ ] é©ç•¶çš„éŒ¯èª¤è™•ç†
- [ ] æ²’æœ‰é‡è¤‡çš„ç¨‹å¼ç¢¼

### æ–‡ä»¶
- [ ] README å·²æ›´æ–°ï¼ˆå¦‚éœ€è¦ï¼‰
- [ ] API æ–‡ä»¶å·²æ›´æ–°
- [ ] è¡Œå…§è¨»è§£å……åˆ†
- [ ] JSDoc/TSDoc å®Œæ•´

### å®‰å…¨æ€§
- [ ] æ²’æœ‰ç¡¬ç·¨ç¢¼çš„å¯†ç¢¼æˆ–é‡‘é‘°
- [ ] è¼¸å…¥é©—è­‰é©ç•¶
- [ ] æ²’æœ‰ SQL æ³¨å…¥é¢¨éšª
- [ ] XSS é˜²è­·åˆ°ä½

## ğŸ”— ç›¸é—œé€£çµ
- [è¨­è¨ˆæ–‡ä»¶](link)
- [API è¦æ ¼](link)
- [æ¸¬è©¦å ±å‘Š](link)
- [ç›¸é—œ PR](link)

## ğŸ“Œ å‚™è¨»
[ä»»ä½•å…¶ä»–å¯©æŸ¥è€…éœ€è¦çŸ¥é“çš„è³‡è¨Š]

---
ğŸ’¡ **æç¤ºçµ¦å¯©æŸ¥è€…**ï¼šè«‹ç‰¹åˆ¥æ³¨æ„ [éœ€è¦é‡é»å¯©æŸ¥çš„éƒ¨åˆ†]
```

## ğŸ¤– è‡ªå‹•åŒ– PR å…§å®¹ç”Ÿæˆ

### 1. ç¨‹å¼ç¢¼åˆ†æ
```javascript
class PRAnalyzer {
  async analyzeDiff(baseBranch, headBranch) {
    const diff = await this.getDiff(baseBranch, headBranch);
    
    return {
      filesChanged: this.countFiles(diff),
      linesAdded: this.countAdditions(diff),
      linesDeleted: this.countDeletions(diff),
      changeType: this.detectChangeType(diff),
      breakingChanges: this.detectBreakingChanges(diff),
      testCoverage: await this.calculateCoverage(diff)
    };
  }
  
  detectChangeType(diff) {
    if (diff.includes('feat:') || diff.includes('feature/')) {
      return 'feature';
    }
    if (diff.includes('fix:') || diff.includes('bugfix/')) {
      return 'bugfix';
    }
    // æ›´å¤šé‚è¼¯...
  }
  
  detectBreakingChanges(diff) {
    const breakingPatterns = [
      /removed\s+function/i,
      /changed\s+signature/i,
      /deprecated/i,
      /breaking/i
    ];
    
    return breakingPatterns.some(pattern => pattern.test(diff));
  }
}
```

### 2. æ™ºèƒ½æè¿°ç”Ÿæˆ
```javascript
class PRDescriptionGenerator {
  generate(analysis, commits, issue) {
    const sections = {
      summary: this.generateSummary(commits, issue),
      changes: this.listChanges(analysis),
      testing: this.generateTestPlan(analysis),
      deployment: this.checkDeploymentNeeds(analysis),
      performance: this.analyzePerformanceImpact(analysis)
    };
    
    return this.formatDescription(sections);
  }
  
  generateSummary(commits, issue) {
    // å¾ commits å’Œ issue æå–é—œéµè³‡è¨Š
    const keywords = this.extractKeywords(commits);
    const problem = issue?.description || 'æ”¹é€²ç³»çµ±åŠŸèƒ½';
    const solution = this.inferSolution(commits);
    
    return `æ­¤ PR ${solution}ï¼Œè§£æ±ºäº† ${problem}ã€‚ä¸»è¦æ¶‰åŠ ${keywords.join('ã€')} ç­‰æ–¹é¢çš„æ”¹é€²ã€‚`;
  }
  
  generateTestPlan(analysis) {
    const plan = [];
    
    if (analysis.hasNewFeatures) {
      plan.push('æ¸¬è©¦æ–°åŠŸèƒ½çš„æ­£å¸¸æµç¨‹');
      plan.push('æ¸¬è©¦é‚Šç•Œæ¢ä»¶å’ŒéŒ¯èª¤è™•ç†');
    }
    
    if (analysis.hasBugFixes) {
      plan.push('é©—è­‰éŒ¯èª¤å·²ä¿®å¾©');
      plan.push('ç¢ºä¿æ²’æœ‰å¼•å…¥æ–°å•é¡Œ');
    }
    
    return plan;
  }
}
```

### 3. æˆªåœ–è‡ªå‹•ç”Ÿæˆ
```javascript
class ScreenshotGenerator {
  async generateComparison(feature) {
    const before = await this.captureBaseBranch(feature);
    const after = await this.captureHeadBranch(feature);
    
    return {
      before: await this.uploadImage(before),
      after: await this.uploadImage(after),
      diff: await this.generateDiffImage(before, after)
    };
  }
  
  async captureBaseBranch(feature) {
    // åˆ‡æ›åˆ° base branch
    await git.checkout('main');
    await this.buildProject();
    
    // ä½¿ç”¨ Puppeteer æˆªåœ–
    const browser = await puppeteer.launch();
    const page = await browser.newPage();
    await page.goto(`http://localhost:3000/${feature}`);
    const screenshot = await page.screenshot();
    await browser.close();
    
    return screenshot;
  }
}
```

## ğŸ“Š PR å“è³ªæŒ‡æ¨™

### ç†æƒ³çš„ PR ç‰¹å¾µ
```yaml
è¦æ¨¡:
  æª”æ¡ˆæ•¸: < 20
  è®Šæ›´è¡Œæ•¸: < 400
  å–®ä¸€ç›®çš„: true

å¯è®€æ€§:
  æ¸…æ™°çš„æ¨™é¡Œ: true
  å®Œæ•´çš„æè¿°: true
  æœ‰æ„ç¾©çš„ commit: true
  
å¯æ¸¬è©¦æ€§:
  åŒ…å«æ¸¬è©¦: true
  æ¸¬è©¦è¦†è“‹ç‡: > 80%
  CI é€šé: true

å¯å¯©æŸ¥æ€§:
  è‡ªæˆ‘å¯©æŸ¥: true
  ç„¡é—œè®Šæ›´: false
  æ ¼å¼ä¸€è‡´: true
```

### PR æª¢æŸ¥æ¸…å–®è‡ªå‹•åŒ–
```javascript
class PRChecklist {
  async validate(pr) {
    const checks = {
      hasTests: await this.checkTests(pr),
      hasDocumentation: await this.checkDocs(pr),
      passesLinting: await this.runLinter(pr),
      passesSecurity: await this.runSecurityScan(pr),
      hasBreakingChanges: await this.checkBreaking(pr),
      followsConventions: await this.checkConventions(pr)
    };
    
    return {
      passed: Object.values(checks).every(Boolean),
      details: checks,
      suggestions: this.generateSuggestions(checks)
    };
  }
  
  generateSuggestions(checks) {
    const suggestions = [];
    
    if (!checks.hasTests) {
      suggestions.push('è«‹åŠ å…¥ç›¸é—œçš„æ¸¬è©¦æ¡ˆä¾‹');
    }
    
    if (!checks.hasDocumentation) {
      suggestions.push('è«‹æ›´æ–°ç›¸é—œæ–‡ä»¶');
    }
    
    return suggestions;
  }
}
```

## ğŸ”„ PR å·¥ä½œæµç¨‹æ•´åˆ

### GitHub Actions é…ç½®
```yaml
name: PR Automation

on:
  pull_request:
    types: [opened, synchronize]

jobs:
  pr-assistant:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
        with:
          fetch-depth: 0
      
      - name: Analyze PR
        id: analyze
        run: |
          # åŸ·è¡Œ PR åˆ†æè…³æœ¬
          node scripts/analyze-pr.js
      
      - name: Update PR Description
        uses: actions/github-script@v6
        with:
          script: |
            const analysis = ${{ steps.analyze.outputs.result }};
            const description = generatePRDescription(analysis);
            
            await github.rest.pulls.update({
              owner: context.repo.owner,
              repo: context.repo.repo,
              pull_number: context.issue.number,
              body: description
            });
      
      - name: Add Labels
        uses: actions/github-script@v6
        with:
          script: |
            const labels = detectLabels(context.payload.pull_request);
            
            await github.rest.issues.addLabels({
              owner: context.repo.owner,
              repo: context.repo.repo,
              issue_number: context.issue.number,
              labels: labels
            });
      
      - name: Request Reviews
        uses: actions/github-script@v6
        with:
          script: |
            const reviewers = await selectReviewers(
              context.payload.pull_request
            );
            
            await github.rest.pulls.requestReviewers({
              owner: context.repo.owner,
              repo: context.repo.repo,
              pull_number: context.issue.number,
              reviewers: reviewers
            });
```

### è‡ªå‹•å¯©æŸ¥å»ºè­°
```javascript
class AutoReviewer {
  async review(pr) {
    const comments = [];
    const files = await this.getChangedFiles(pr);
    
    for (const file of files) {
      const issues = await this.analyzeFile(file);
      
      for (const issue of issues) {
        comments.push({
          path: file.filename,
          line: issue.line,
          body: issue.message,
          severity: issue.severity
        });
      }
    }
    
    return this.postReviewComments(pr, comments);
  }
  
  async analyzeFile(file) {
    const issues = [];
    
    // è¤‡é›œåº¦æª¢æŸ¥
    if (file.complexity > 10) {
      issues.push({
        line: file.complexLine,
        message: 'æ­¤å‡½æ•¸çš„å¾ªç’°è¤‡é›œåº¦éé«˜ï¼Œå»ºè­°æ‹†åˆ†',
        severity: 'warning'
      });
    }
    
    // å®‰å…¨æª¢æŸ¥
    const securityIssues = await this.securityScan(file);
    issues.push(...securityIssues);
    
    return issues;
  }
}
```

## ğŸ’¡ æœ€ä½³å¯¦è¸

### DO's âœ…
1. **åŸå­æ€§æäº¤**ï¼šæ¯å€‹ PR åªè§£æ±ºä¸€å€‹å•é¡Œ
2. **æ¸…æ™°çš„æ­·å²**ï¼šä½¿ç”¨æœ‰æ„ç¾©çš„ commit è¨Šæ¯
3. **å®Œæ•´çš„ä¸Šä¸‹æ–‡**ï¼šæä¾›è¶³å¤ çš„èƒŒæ™¯è³‡è¨Š
4. **ä¸»å‹•æºé€š**ï¼šæ¨™è¨»éœ€è¦ç‰¹åˆ¥æ³¨æ„çš„åœ°æ–¹
5. **åŠæ™‚æ›´æ–°**ï¼šæ ¹æ“šåé¥‹å¿«é€Ÿè¿­ä»£

### DON'Ts âŒ
1. **å·¨å¤§çš„ PR**ï¼šé¿å…è¶…é 400 è¡Œçš„è®Šæ›´
2. **æ··åˆè®Šæ›´**ï¼šä¸è¦åœ¨ä¸€å€‹ PR ä¸­æ··åˆå¤šå€‹åŠŸèƒ½
3. **å¿½ç•¥æ¸¬è©¦**ï¼šä¸è¦æäº¤æœªæ¸¬è©¦çš„ç¨‹å¼ç¢¼
4. **æ ¼å¼æ··äº‚**ï¼šç¢ºä¿ç¨‹å¼ç¢¼æ ¼å¼ä¸€è‡´
5. **ç¼ºä¹æè¿°**ï¼šä¸è¦æäº¤ç©ºç™½æˆ–éæ–¼ç°¡å–®çš„æè¿°

## ğŸ¯ PR ç¯„ä¾‹

### å„ªç§€çš„ PR ç¯„ä¾‹
```markdown
# feat: å¯¦ä½œè³¼ç‰©è»ŠæŒä¹…åŒ–åŠŸèƒ½ (#234)

## ğŸ“ æ¦‚è¿°
å¯¦ä½œäº†è³¼ç‰©è»Šè³‡æ–™çš„æœ¬åœ°æŒä¹…åŒ–åŠŸèƒ½ï¼Œä½¿ç”¨è€…é—œé–‰ç€è¦½å™¨å¾Œé‡æ–°é–‹å•Ÿä»èƒ½çœ‹åˆ°ä¹‹å‰åŠ å…¥çš„å•†å“ã€‚æ¡ç”¨ localStorage é…åˆè³‡æ–™å£“ç¸®ï¼Œç¢ºä¿æ•ˆèƒ½å’Œä½¿ç”¨è€…é«”é©—ã€‚

## ğŸ¯ é—œè¯ Issue
Closes #234

## ğŸ”„ è®Šæ›´é¡å‹
- [x] âœ¨ æ–°åŠŸèƒ½ (New feature)

## ğŸ“‹ è®Šæ›´å…§å®¹

### æ–°å¢åŠŸèƒ½
- **è³¼ç‰©è»ŠæŒä¹…åŒ–**ï¼šä½¿ç”¨ localStorage å„²å­˜è³¼ç‰©è»Šè³‡æ–™
- **è³‡æ–™å£“ç¸®**ï¼šä½¿ç”¨ LZ-string å£“ç¸®è³‡æ–™ï¼Œæ¸›å°‘å„²å­˜ç©ºé–“
- **éæœŸæ©Ÿåˆ¶**ï¼š7 å¤©å¾Œè‡ªå‹•æ¸…ç†éæœŸè³‡æ–™
- **åŒæ­¥æ©Ÿåˆ¶**ï¼šå¤šåˆ†é é–“è³¼ç‰©è»Šè³‡æ–™åŒæ­¥

### æŠ€è¡“å¯¦ä½œ
- å»ºç«‹ `CartPersistence` æœå‹™è™•ç†æ‰€æœ‰æŒä¹…åŒ–é‚è¼¯
- å¯¦ä½œ `StorageAdapter` ä»‹é¢ï¼Œä¾¿æ–¼æœªä¾†åˆ‡æ›å„²å­˜æ–¹æ¡ˆ
- åŠ å…¥è³‡æ–™é©—è­‰ï¼Œé˜²æ­¢æå£è³‡æ–™é€ æˆæ‡‰ç”¨å´©æ½°

## ğŸ§ª æ¸¬è©¦

### æ¸¬è©¦è¦†è“‹ç‡
- è®Šæ›´å‰ï¼š82%
- è®Šæ›´å¾Œï¼š87%

### æ¸¬è©¦æ­¥é©Ÿ
1. é–‹å•Ÿæ‡‰ç”¨ï¼ŒåŠ å…¥å•†å“åˆ°è³¼ç‰©è»Š
2. é—œé–‰ç€è¦½å™¨
3. é‡æ–°é–‹å•Ÿæ‡‰ç”¨
4. ç¢ºèªè³¼ç‰©è»Šå•†å“ä»ç„¶å­˜åœ¨

## ğŸ“¸ æˆªåœ–
![è³¼ç‰©è»ŠæŒä¹…åŒ–æ¼”ç¤º](https://example.com/demo.gif)

## ğŸ“Š æ•ˆèƒ½å½±éŸ¿
| æŒ‡æ¨™ | è®Šæ›´å‰ | è®Šæ›´å¾Œ | èªªæ˜ |
|-----|--------|--------|------|
| é¦–æ¬¡è¼‰å…¥ | 1.2s | 1.3s | å¢åŠ  100ms ç”¨æ–¼è®€å–å¿«å– |
| è³¼ç‰©è»Šæ“ä½œ | 50ms | 55ms | å¢åŠ æŒä¹…åŒ–æ“ä½œ |
| å„²å­˜ç©ºé–“ | 0KB | <100KB | å£“ç¸®å¾Œçš„è³‡æ–™å¤§å° |

## âœ… å¯©æŸ¥æª¢æŸ¥æ¸…å–®
- [x] å–®å…ƒæ¸¬è©¦å®Œæ•´
- [x] ç¨‹å¼ç¢¼ç¬¦åˆè¦ç¯„
- [x] æ–‡ä»¶å·²æ›´æ–°
- [x] ç„¡å®‰å…¨é¢¨éšª

---
ğŸ’¡ **å¯©æŸ¥é‡é»**ï¼šè«‹ç‰¹åˆ¥é—œæ³¨ `CartPersistence.js` ä¸­çš„è³‡æ–™é©—è­‰é‚è¼¯
```

---

**è¨˜ä½**ï¼šå„ªç§€çš„ PR ä¸åªæ˜¯ç¨‹å¼ç¢¼è®Šæ›´çš„é›†åˆï¼Œè€Œæ˜¯ä¸€å€‹å®Œæ•´çš„æºé€šå·¥å…·ã€‚å®ƒæ‡‰è©²è®“å¯©æŸ¥è€…å¿«é€Ÿç†è§£ä½ çš„æ„åœ–ã€å¯¦ä½œæ–¹å¼å’Œæ½›åœ¨å½±éŸ¿ã€‚